<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter Tracker</title>
    <style>
        /* Base styles */
body {
    font-family: 'Georgia', serif;
    max-width: 100%;
    margin: 0 auto;
    padding: 20px;
    line-height: 1.6;
    color: #333;
    background-color: #f9f9f9;
    transition: background-color 0.3s, color 0.3s;
}

body.dark-theme {
    background-color: #1a1a1a;
    color: #e0e0e0;
}

/* Typography */
h1 {
    font-size: 2.5rem;
    text-align: center;
    border-bottom: 2px solid #333;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

/* Table styles */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 0.9rem;
}

th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: left;
}

th {
    background-color: #f2f2f2;
    font-weight: bold;
}

.dark-theme th {
    background-color: #333;
    color: #fff;
}

/* Form elements */
input, button {
    margin: 5px 0;
    padding: 8px;
    font-size: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
}

button {
    background-color: #4a4a4a;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
}

button:hover {
    background-color: #333;
}

/* Notification */
#notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border-radius: 5px;
    display: none;
    font-size: 0.9rem;
}

/* Theme toggle */
.theme-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    background-color: #333;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
}

/* Responsive design */
@media (max-width: 600px) {
    body {
        padding: 10px;
    }

    h1 {
        font-size: 2rem;
    }

    table, th, td {
        font-size: 0.8rem;
    }

    input, button {
        width: 100%;
        margin: 5px 0;
    }
}

/* Minimalistic newspaper-like additions */
body {
    column-count: 1;
}

@media (min-width: 768px) {
    body {
        column-count: 2;
        column-gap: 40px;
    }
}

h1, table, #chapterForm {
    column-span: all;
}

#chapterForm {
    background-color: #f0f0f0;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 4px;
}

.dark-theme #chapterForm {
    background-color: #2a2a2a;
}
    </style>
</head>
<body>
    <h1>Chapter Tracker</h1>
    <div>
        <input type="text" id="chapterName" placeholder="Chapter Name">
        <input type="date" id="studyDate">
        <button onclick="addChapter()">Add Chapter</button>
    </div>
    <table id="chapterTable">
        <tr>
            <th>Chapter</th>
            <th>Last Studied</th>
            <th>Days Since</th>
            <th>Revisions</th>
            <th>Action</th>
        </tr>
    </table>
    <div id="notification"></div>
    

    <script>
        function addChapter() {
            const chapterName = document.getElementById('chapterName').value;
            const studyDate = document.getElementById('studyDate').value;
            if (chapterName && studyDate) {
                let chapters = JSON.parse(localStorage.getItem('chapters')) || {};
                chapters[chapterName] = {
                    lastStudied: studyDate,
                    revisions: 0
                };
                localStorage.setItem('chapters', JSON.stringify(chapters));
                updateTable();
                document.getElementById('chapterName').value = '';
                document.getElementById('studyDate').value = '';
                showNotification('Chapter added successfully!');
            }
        }

        function updateTable() {
            const table = document.getElementById('chapterTable');
            const chapters = JSON.parse(localStorage.getItem('chapters')) || {};
            
            // Clear existing rows
            while (table.rows.length > 1) {
                table.deleteRow(1);
            }

            for (let chapter in chapters) {
                const row = table.insertRow(-1);
                const lastStudied = new Date(chapters[chapter].lastStudied);
                const daysSince = Math.floor((new Date() - lastStudied) / (1000 * 60 * 60 * 24));
                const urgencyColor = getUrgencyColor(daysSince);
                
                row.insertCell(0).textContent = chapter;
                row.insertCell(1).textContent = lastStudied.toLocaleDateString();
                row.insertCell(2).textContent = daysSince;
                row.insertCell(3).textContent = chapters[chapter].revisions;
                
                const actionCell = row.insertCell(4);
                const reviseButton = document.createElement('button');
                reviseButton.textContent = 'Revise';
                reviseButton.onclick = () => reviseChapter(chapter);
                actionCell.appendChild(reviseButton);

                row.style.backgroundColor = urgencyColor;
            }
        }

        function reviseChapter(chapter) {
            let chapters = JSON.parse(localStorage.getItem('chapters')) || {};
            chapters[chapter].lastStudied = new Date().toISOString().split('T')[0];
            chapters[chapter].revisions++;
            localStorage.setItem('chapters', JSON.stringify(chapters));
            updateTable();
            showNotification('Chapter revised successfully!');
        }

        function getUrgencyColor(days) {
            const urgencyScale = [
                '#99FF00', // Green (0 days)
                '#CCFF00', // 1 day
                '#FFFF00', // 2 days
                '#FFCC00', // 3 days
                '#FF9900', // 4 days
                '#FF6600', // 5 days
                '#FF3300', // 6 days
                '#FF0000'  // Red (7+ days)
            ];
            return urgencyScale[Math.min(days, 7)];
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
        }

        // Initial table update
        updateTable();

        // Check for chapters that need revision
        function checkRevisionNeeded() {
            const chapters = JSON.parse(localStorage.getItem('chapters')) || {};
            const today = new Date();
            for (let chapter in chapters) {
                const lastStudied = new Date(chapters[chapter].lastStudied);
                const daysSince = Math.floor((today - lastStudied) / (1000 * 60 * 60 * 24));
                if (daysSince >= 7) {
                    showNotification(`Time to revise ${chapter}!`);
                    break;  // Show only one notification at a time
                }
            }
        }

        // Check for revision needed every hour
        setInterval(checkRevisionNeeded, 3600000);
        // Also check on page load
        checkRevisionNeeded();
    </script>
</body>
</html>
